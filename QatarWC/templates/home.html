<!DOCTYPE html>

<html lang="en">
    <head>
        <!--Make page 'responsive' to screen size -->
        <meta name="viewport" content="initial-scale=1, width=device-width">
        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
        <!-- FIFA api for flags-->
        <link rel="preconnect" href="https://cloudinary.fifa.com">

        <link href="/static/styles.css" rel="stylesheet">
        
        <title>
            Qatar2022 Simulate
        </title>
    </head>
    <body>
        <header class="jumbotron text-center mt-3">
            <h3>
                Simulate scenarios for a given team in the upcoming world cup!
            </h3>
            <h2>Calendar Qatar 2022</h2>
            <p>Simulate individual matches, groups, stages...</p>
            <form method="post" action="/">
                <button class="btn btn-outline-success btn-sm" value="" title="Simulate all matches">Simulate groups stage</button>
            </form>
        </header>
        <main>
            <div class="container mx-1 text-center" style="max-width:1500px">
                {% for label, labelp1 in zip(groups[::2], groups[1::2]) -%}
                <div class="row">
                    <div class="col">
                        <table class="table table-hover caption-top">
                            <caption class="text-center">
                                Group {{ label }}
                            </caption>
                            <thead>
                                <tr>
                                    {% set tg = teams[label] %}
                                    {% for team in tg -%}
                                    <td> {{ team }} 
                                        <img title="{{names[team]}}" decoding="async" loading="lazy" height="70%" width="auto" 
                                                         src="https://cloudinary.fifa.com/api/v3/picture/flags-sq-2/{{team}}?tx=c_fill,g_auto,q_auto" class="image_img__3ckHZ group_imageSize__11-Uy">
                                    </td>
                                    {% endfor %}
                                    <td> 
                                        <form method="get" action="/group">
                                            <button class="btn btn-outline-success btn-sm" name="group" value="" title="Simulate group">Simulate</button>
                                        </form>
                                    </td>
                                </tr>
                            </thead>
                            <tbody style="font-size: 15px">
                                {% set fg = fixtures[label] %}
                                {% for match in fg -%}
                                <tr>
                                    <td class="text-nowrap">{{match.date}}</td>
                                    <td>{{match.t1}}</td>
                                    <td> vs </td>
                                    <td>{{match.t2}}</td>
                                    {% if match.id|int == simulate|int %}
                                    <td>{{ score.0 }} : {{ score.1 }}</td>
                                    {% else %}
                                    <td class="py-1">
                                        <div class="btn-container">
                                        <form method="get" action="/">
                                            <button class="btn btn-outline-primary btn-sm" style="--bs-btn-padding-y: .3rem; --bs-btn-font-size: .8rem;"
                                                    type="submit" title="Simulate match" name="match_id" value="{{match.id}}">Simulate</button>
                                        </form>
                                        </div>
                                    </td>
                                    {% endif %}
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="col">

                    </div>
                    <div class="col">

                    </div>
                    <div class="col">
                        <table class="table table-hover caption-top">
                            <caption class="text-center">
                                Group {{ labelp1 }}
                            </caption>
                            <thead>
                                <tr>
                                    {% set tg = teams[labelp1] %}
                                    {% for team in tg -%}
                                    <td> {{ team }} <img title="{{names[team]}}" decoding="async" loading="lazy" height="70%" width="auto" 
                                                         src="https://cloudinary.fifa.com/api/v3/picture/flags-sq-2/{{team}}?tx=c_fill,g_auto,q_auto" class="image_img__3ckHZ group_imageSize__11-Uy"></td>
                                    {% endfor %}
                                    <td> 
                                        <form method="get" action="/group">
                                            <button class="btn btn-outline-success btn-sm" name="group" value="" title="Simulate group">Simulate</button>
                                        </form>
                                    </td>
                                </tr>
                            </thead>
                            <tbody style="font-size: 15px">
                                {% set fg = fixtures[labelp1] %}
                                {% for match in fg -%}
                                <tr>
                                    <td class="text-nowrap">{{match.date}}</td>
                                    <td>{{match.t1}}</td>
                                    <td> vs </td>
                                    <td>{{match.t2}}</td>
                                    <td class="py-1">
                                        <div class="btn-container">
                                        <form method="post" action="/">
                                            <button class="btn btn-outline-primary btn-sm" style="--bs-btn-padding-y: .3rem; --bs-btn-font-size: .8rem;" 
                                                    name="match" value="" title="Simulate match">Simulate</button>
                                        </form>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                                
                            </tbody>
                        </table>
                    </div>
                </div>
                {%- endfor %}
            </div>
            <script>
                /* Change format of dates (NOW IN BACKEND)
                dates = document.getElementsByName("date")
                for (let i=0; i<dates.length; i++){
                    let date = new Date(dates[i].innerText)
                    dates[i].innerText = date.toLocaleDateString(undefined, { month: 'short', day: 'numeric' });   
                }*/
            </script>

            <table>
                <thead>
                    <input name="q" placeholder="Select team" type="text">
                    <tr>
                        <th>Qualified teams</th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </main>
    </body>
</html>