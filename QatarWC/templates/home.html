<!DOCTYPE html>

<html lang="en">
    <head>
        <!--Make page 'responsive' to screen size -->
        <meta name="viewport" content="initial-scale=1, width=device-width">
        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
        <!-- FIFA api for flags-->
        <link rel="preconnect" href="https://cloudinary.fifa.com">

        <title>
            Qatar2022 Simulate
        </title>
    </head>
    <body>
        <header class="jumbotron text-center mt-3">
            <h3>
                Simulate scenarios for a given team in the upcoming world cup!
            </h3>
            <h2>Calendar Qatar 2022</h2>
        </header>
        <main>
            <div class="container text-center">
                <div class="row">
                    {% for label in groups[:4] -%}
                    <div class="col">
                        <table class="table table-hover caption-top">
                            <caption class="text-center">
                                Group {{ label }}
                            </caption>
                            <thead>
                                <tr>
                                    {% set tg = teams[label] %}
                                    {% for team in tg -%}
                                    <td> {{ team }} <img title="{{names[team]}}" decoding="async" loading="lazy" height="70%" width="auto" src="https://cloudinary.fifa.com/api/v3/picture/flags-sq-2/{{team}}?tx=c_fill,g_auto,q_auto" class="image_img__3ckHZ group_imageSize__11-Uy"> </td>
                                    {% endfor %}
                                    <td> 
                                        <form method="get" action="/group">
                                            <button class="btn btn-outline-success btn-sm" name="group" value="">Simulate</button>
                                        </form>
                                    </td>
                                </tr>
                            </thead>
                            <tbody>
                                {% set fg = fixtures[label] %}
                                {% for match in fg -%}
                                <tr>
                                    <td name="date">{{match.0}}</td>
                                    <td>{{match.1}}</td>
                                    <td> vs </td>
                                    <td>{{match.2}}</td>
                                    <td></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {%- endfor %}
                </div>
                <div class="row">
                    {% for label in groups[4:] -%}
                    <div class="col">
                        <table class="table table-hover caption-top">
                            <caption class="text-center">
                                Group {{ label }}
                            </caption>
                            <thead>
                                <tr>
                                    {% set tg = teams[label] %}
                                    {% for team in tg -%}
                                    <td> {{ team }} <img decoding="async" loading="lazy" height="70%" width="auto" src="https://cloudinary.fifa.com/api/v3/picture/flags-sq-2/{{team}}?tx=c_fill,g_auto,q_auto" alt="" title="" class="image_img__3ckHZ group_imageSize__11-Uy"></td>
                                    {% endfor %}
                                    <td> 
                                        <form method="get" action="/group">
                                            <button class="btn btn-outline-success btn-sm" name="group" value="">Simulate</button>
                                        </form>
                                    </td>
                                </tr>
                            </thead>
                            <tbody>
                                {% set fg = fixtures[label] %}
                                {% for match in fg -%}
                                <tr>
                                    <td name="date">{{match.0}}</td>
                                    <td>{{match.1}}</td>
                                    <td> vs </td>
                                    <td>{{match.2}}</td>
                                    <td></td>
                                </tr>
                                {% endfor %}
                                
                            </tbody>
                        </table>
                    </div>
                    {%- endfor %}
                </div>
            </div>
            <script>
                // Change format of dates
                dates = document.getElementsByName("date")
                for (let i=0; i<dates.length; i++){
                    let date = new Date(dates[i].innerText)
                    dates[i].innerText = date.toLocaleDateString(undefined, { month: 'short', day: 'numeric' });   
                }
            </script>

            <table>
                <thead>
                    <input autofocus name="q" placeholder="Select team" type="text">
                    <tr>
                        <th>Qualified teams</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Argentina
                        </td>
                    </tr>
                </tbody>
            </table>
        </main>
    </body>
</html>